{% extends 'base.html' %}

{% block title %}Your Profile - Deskdelight{% endblock %}

{% block content %}
<div class="container mt-5" style="max-width: 800px;">
    <h2 class="text-center text-white mb-4" style="font-weight: bold;">Your Profile</h2>

    <div class="card shadow" style="border-radius: 10px; background-color: #2b2b2b; color: #fff;">
        <div class="card-body p-4">
            <form id="profileForm" method="post" onsubmit="showPopup(event)">
                {% csrf_token %}
                <div class="mb-4">
                    <label for="username" class="form-label" style="font-weight: 500;">Username</label>
                    <input type="text" class="form-control" id="username" name="username" value="{{ user.username }}" style="padding: 10px; border-radius: 5px; background-color: #3a3a3a; color: #fff; border: 1px solid #555;" required>
                </div>
                <div class="mb-4">
                    <label for="email" class="form-label" style="font-weight: 500;">Email</label>
                    <input type="email" class="form-control" id="email" name="email" value="{{ user.email }}" style="padding: 10px; border-radius: 5px; background-color: #3a3a3a; color: #fff; border: 1px solid #555;" required>
                </div>
                <div class="mb-4">
                    <label for="phone_number" class="form-label" style="font-weight: 500;">Phone Number</label>
                    <input type="text" class="form-control" id="phone_number" name="phone_number" value="{{ user.phone_number }}" style="padding: 10px; border-radius: 5px; background-color: #3a3a3a; color: #fff; border: 1px solid #555;" required>
                </div>
                <div class="mb-4">
                    <label for="address" class="form-label" style="font-weight: 500;">Address</label>
                    <input type="text" class="form-control" id="address" name="address" value="{{ user.address }}" style="padding: 10px; border-radius: 5px; background-color: #3a3a3a; color: #fff; border: 1px solid #555;" required>
                </div>
                <button type="submit" class="btn btn-primary w-100" style="padding: 10px; font-weight: 600; background-color: #30cc79; border: none;">Update Profile</button>
            </form>
        </div>
    </div>
</div>

<!-- Pop-up Modal -->
<div id="popupModal" class="modal" tabindex="-1" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content" style="background-color: #2b2b2b; color: #fff; border: 1px solid #444;">
            <div class="modal-header">
                <h5 class="modal-title">Profile Updated</h5>
                <button type="button" class="btn-close btn-close-white" onclick="closePopup()" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Your profile has been updated successfully!</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="closePopup()" style="background-color: #1e90ff; border: none;">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
    function showPopup(event) {
        event.preventDefault(); // Prevent form submission to redirect immediately
        const form = document.getElementById('profileForm');
        const popupModal = document.getElementById('popupModal');

        // Display the modal
        popupModal.style.display = 'block';

        // Submit the form after a slight delay
        setTimeout(() => {
            form.submit();
        }, 6000);
    }

    function closePopup() {
        const popupModal = document.getElementById('popupModal');
        popupModal.style.display = 'none';
    }
</script>
{% endblock %}